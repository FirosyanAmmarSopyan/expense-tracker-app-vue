const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BNuMk3Wi.js","assets/DataTable-RgBcQQQR.js","assets/vendor-B24ldFEr.js","assets/DataTable-CxmaPJlo.css","assets/formatter-DDo20qiT.js","assets/index-pZ3LRuN-.css","assets/categories-management-D7d4FVEB.js","assets/ChangeModal-CwCIfM9c.js","assets/ChangeModal-QSaelWQN.css","assets/categories-management-BgDu62ZN.css","assets/change-theme-BrL0hv-5.js","assets/change-theme-CAUETY40.css","assets/design-information-CuL6TuIM.js","assets/Tooltips-DAukjdZG.js","assets/SearchBar-BTGPTjxY.js","assets/SearchBar-D8ePnr9W.css","assets/design-information-Y9hQ3yJ0.css","assets/expense-management-BE2nOs9t.js","assets/expense-management-DBdUpPi6.css","assets/admin-DbtWCf6F.js","assets/header-aV-DW3Lc.js","assets/logo-ttg-CCO2tMEl.js","assets/header-hXvES4ds.css","assets/admin-BE4gbzM7.css","assets/default-BzAIhpTT.js","assets/default-zbYwEdc3.css","assets/LoginView-0xHu65_M.js","assets/LoginView-BX0CDypc.css","assets/HomeView-CecrKLKn.js","assets/HomeView-flrZbmPz.css"])))=>i.map(i=>d[i]);
import{u as N,a as q,d as F,c as T,r as A,o as H,w as E,b as v,e as B,f as _,g as i,h as k,C as I,i as c,j as $,k as b,F as P,l as M,n as U,t as D,V as j,m as K,p as J,q as W,s as G,v as Q,A as X,x as Y,y as Z,N as ee,_ as te,B as oe,z as se,D as re,E as ae,G as ne,H as ce,I as le,J as ie,K as ue,L as de,M as he,O as pe,P as me}from"./vendor-B24ldFEr.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function u(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(s){if(s.ep)return;s.ep=!0;const r=u(s);fetch(s.href,r)}})();const R=()=>{const l=N(),n=q.create({baseURL:void 0}),u=()=>localStorage.getItem("access_token"),h=()=>localStorage.getItem("refresh_token"),s=async()=>{try{const e=h();if(!e)throw new Error("No refresh token available");const o=await n.post("/auth/refresh",{refreshToken:e}),{access_token:a,refresh_token:g}=o.data;return localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",g),a}catch(e){throw localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),l.push("/login"),e}};return n.interceptors.request.use(e=>{const o=u();return o&&(e.headers.Authorization=`Bearer ${o}`),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var a;const o=e.config;if(((a=e.response)==null?void 0:a.status)===401&&!o._retry){o._retry=!0;try{const g=await s();return o.headers.Authorization=`Bearer ${g}`,n(o)}catch(g){return Promise.reject(g)}}return Promise.reject(e)}),{helloFn:()=>{},get:async(e,o={})=>{try{return await n.get(e,{params:o})}catch(a){throw a}},post:async(e,o={})=>{try{return await n.post(e,o)}catch(a){throw a}},put:async(e,o={})=>{try{return await n.put(e,o)}catch(a){throw a}},del:async(e,o={})=>{try{return await n.delete(e,{data:o})}catch(a){throw a}},patch:async(e,o={})=>{try{return await n.patch(e,o)}catch(a){throw a}}}},L=F("global",{state:()=>({collapsed:localStorage.getItem("sidebarCollapsed")==="true",theme:localStorage.getItem("theme")||"light",drawerSearchActive:!1,userData:null,userCredits:0,miniScreenCollapsed:!1,totalCredits:2e3,snapshotSettings:null,defaultTab:"Business Overview",collapseValueTrigger:null,selectedValueTriggerName:null,isArgusAIActive:!1,localSelectedValue:null,selectedPeriod:30,lastActiveKey:"dashboard",refreshSearchData:!1}),getters:{creditPercentage:l=>l.userCredits/l.totalCredits*100},actions:{toggleArgusAIActive(){this.isArgusAIActive=!this.isArgusAIActive},toggleCollapsed(){this.collapsed=!this.collapsed,localStorage.setItem("sidebarCollapsed",this.collapsed)},toggleDrawerSearch(){this.drawerSearchActive=!this.drawerSearchActive},toggleMiniScreenCollapsed(){this.miniScreenCollapsed=!this.miniScreenCollapsed},async fetchUserData(l){try{const n=await R().get("/users",{},l);this.userData=n.data,this.userCredits=n.data.credit}catch(n){throw n}},setSnapshotSettings(l){this.snapshotSettings=l,localStorage.setItem("snapshotSettings",JSON.stringify(l))},setLastActiveKey(l){this.lastActiveKey=l},setRefreshSearchData(l){this.refreshSearchData=l}}}),ge=(l,n)=>{const u=l.__vccOpts||l;for(const[h,s]of n)u[h]=s;return u},_e={class:"chatbot-container"},fe={class:"chatbot-modal-header"},ve={class:"chatbot-modal-body"},ye={class:"chatbot-opening-message"},be={key:0,class:"welcome-section"},we={class:"welcome-icon"},ke={key:1,class:"chat-section"},Se={key:0,class:"bubble-content-container"},Ae={class:"bubble-content"},Ce={class:"paragraph-12-regular",style:{"text-align":"left"}},Ee={class:"chatbot-avatar"},Ie={class:"chatbot-message"},Te={class:"bubble-content markdown-content"},De={class:"paragraph-12-regular",style:{"text-align":"right"}},Le={key:0,class:"bubble-chatbot"},Pe={class:"chatbot-avatar"},Oe={class:"chatbot-modal-footer"},Be={key:0,class:"start-chat-section"},Re={key:1,class:"chatbot-modal-footer-keyboard"},Ve={class:"keyboard-grid"},xe={class:"keyboard-column"},ze={class:"keyboard-column"},Ne={class:"keyboard-input"},qe=["placeholder"],Fe={class:"keyboard-column"},He={class:"keyboard-actions"},$e={__name:"AgentAi",props:{collapsed:{type:Boolean,default:!1}},setup(l){const n=L();T(()=>n.collapsed);const u=T(()=>window.innerWidth<768?"top":"left-start"),h=A(!1),s=A(!1),r=A(""),t=A([]),d=A(!1),p=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),m=()=>{setTimeout(()=>{Z(()=>{const e=document.querySelector(".chatbot-modal-body");e&&(e.scrollTop=e.scrollHeight)})},100)};H(()=>{const e=localStorage.getItem("chatHistory");e&&(t.value=JSON.parse(e),s.value=!0,m())}),E(h,e=>{e&&m()}),E(t,e=>{localStorage.setItem("chatHistory",JSON.stringify(e)),m()},{deep:!0});const y=async()=>{if(!r.value.trim())return;const e={type:"user",content:r.value,timestamp:new Date};t.value.push(e);const o=r.value;r.value="";try{d.value=!0;const a=await R().post("/ai/generate",{message:o});if(a.data){const g={type:"bot",content:a.data,timestamp:new Date};t.value.push(g)}else{const g={type:"bot",content:"Sorry, I couldn't process your message. Please try again.",timestamp:new Date};t.value.push(g)}}catch(a){console.error("Error sending message:",a);const g={type:"bot",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};t.value.push(g)}finally{d.value=!1,m()}};return E(s,e=>{e&&t.value.length===0&&(t.value=[{type:"bot",content:"Hello! How can I help you today?",timestamp:new Date}],m())}),E(t,()=>{m()},{deep:!0}),(e,o)=>{const a=ee,g=te,S=oe,V=se,x=re;return v(),B(x,{style:{"max-height":"41.875rem",padding:"0","border-radius":"30px","background-color":"white","margin-bottom":"2rem"},trigger:"manual",placement:u.value,show:h.value,raw:"","show-arrow":!1,class:"chatbot-popover"},{trigger:_(()=>[i(g,{style:{"background-color":"var(--primary-20)"},right:20,bottom:20,width:"50",height:"50",shape:"circle",onClick:o[0]||(o[0]=f=>h.value=!h.value)},{default:_(()=>[i(a,{color:"white",size:"25"},{default:_(()=>[i(k(I))]),_:1})]),_:1})]),default:_(()=>[c("div",_e,[c("div",fe,[o[4]||(o[4]=c("div",{class:"header-content"},[c("div",{class:"header-semibold"},"Chatbot AI"),c("div",{class:"paragraph-14-regular"},"Ask us about your work, we're here to help.")],-1)),c("div",{class:"close-button",onClick:o[1]||(o[1]=f=>h.value=!1)},[i(a,{size:"20"},{default:_(()=>[i(k($))]),_:1})])]),c("div",ve,[c("div",ye,[s.value?(v(),b("div",ke,[(v(!0),b(P,null,M(t.value,(f,z)=>(v(),b("div",{key:z,class:U(f.type==="user"?"bubble-user":"bubble-chatbot")},[f.type==="user"?(v(),b("div",Se,[c("div",Ae,D(f.content),1),c("div",Ce,D(p(f.timestamp)),1)])):(v(),b(P,{key:1},[c("div",Ee,[i(a,{color:"white",size:"20"},{default:_(()=>[i(k(I))]),_:1})]),c("div",Ie,[o[6]||(o[6]=c("div",{class:"chatbot-name"},"Chatbot AI",-1)),c("div",Te,[i(k(j),{source:f.content},null,8,["source"])]),c("div",De,D(p(f.timestamp)),1)])],64))],2))),128)),d.value?(v(),b("div",Le,[c("div",Pe,[i(a,{color:"white",size:"20"},{default:_(()=>[i(k(I))]),_:1})]),o[7]||(o[7]=c("div",{class:"chatbot-message"},[c("div",{class:"chatbot-name"},"Chatbot AI"),c("div",{class:"bubble-content"},"Typing...")],-1))])):K("",!0)])):(v(),b("div",be,[c("div",we,[i(a,{color:"white",size:"25"},{default:_(()=>[i(k(I))]),_:1})]),o[5]||(o[5]=c("div",{class:"welcome-message"},' Hello Nice to see you here! By pressing the "Start Chat" button you agree to have your personal data processed as described in our Privacy Policy ',-1))]))])]),c("div",Oe,[s.value?(v(),b("div",Re,[c("div",Ve,[c("div",xe,[i(S,{circle:"",text:"",class:"keyboard-button"},{default:_(()=>[i(V,{width:"24px",height:"auto",src:"/smile-ic.svg","preview-disabled":""})]),_:1})]),c("div",ze,[c("div",Ne,[W(c("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=f=>r.value=f),placeholder:r.value,onKeyup:G(y,["enter"])},null,40,qe),[[Q,r.value]])])]),c("div",Fe,[c("div",He,[i(S,{class:"keyboard-button",style:{"background-color":"var(--neutral-20)",color:"var(--neutral-30)",transform:"rotate(-45deg)"},size:"large",circle:"",secondary:""},{default:_(()=>[i(a,{size:"24"},{default:_(()=>[i(k(X))]),_:1})]),_:1}),i(S,{class:"keyboard-button",size:"large",style:{"background-color":"var(--primary-20)",color:"white"},circle:"",secondary:"",disabled:d.value,onClick:y},{default:_(()=>[i(a,{size:"24"},{default:_(()=>[i(k(Y))]),_:1})]),_:1},8,["disabled"])])])])])):(v(),b("div",Be,[i(S,{style:{width:"100%","background-color":"var(--primary-20)",color:"white"},round:"",size:"large",onClick:o[2]||(o[2]=f=>s.value=!0)},{default:_(()=>o[8]||(o[8]=[J(" Start Chat ")])),_:1})]))])])]),_:1},8,["placement","show"])}}},Me=ge($e,[["__scopeId","data-v-272c8bdd"]]),Ue={__name:"App",setup(l){const n=L(),u={common:{baseColor:"#005F97",bodyColor:"#005F97",textColorBase:"#fff",textColor1:"rgba(255, 255, 255, 0.9)",textColor2:"rgba(255, 255, 255, 0.82)",textColor3:"rgba(255, 255, 255, 0.52)",popoverColor:"#005F97",modalColor:"#005F97",tableColor:"#005F97",cardColor:"#005F97",tableHeaderColor:"#1BB3E5",tableColorHover:"#1BB3E5",infoColor:"#1BB3E5"}},h={common:{primaryColor:"#1D9DDD",primaryColorHover:"#1D9DDD"}},s=T(()=>{switch(n.theme){case"dark":return ae;case"blue":return u;default:return h}}),r=T(()=>{switch(n.theme){case"dark":return{"--background-color":"rgb(16, 16, 20)","--background-color-sec":"#48484E","--text-color":"#fff"};case"blue":return{"--background-color":"#005F97","--background-color-sec":"#1BB3E5","--text-color":"#fff"};default:return h}});return(t,d)=>{const p=ne("RouterView"),m=Me,y=ie,e=ce;return v(),B(e,{"theme-overrides":s.value},{default:_(()=>[i(y,null,{default:_(()=>[i(p,{style:le(r.value)},null,8,["style"]),i(m)]),_:1})]),_:1},8,["theme-overrides"])}}},je="modulepreload",Ke=function(l){return"/"+l},O={},w=function(n,u,h){let s=Promise.resolve();if(u&&u.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),d=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));s=Promise.allSettled(u.map(p=>{if(p=Ke(p),p in O)return;O[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const e=document.createElement("link");if(e.rel=m?"stylesheet":je,m||(e.as="script"),e.crossOrigin="",e.href=p,d&&e.setAttribute("nonce",d),document.head.appendChild(e),m)return new Promise((o,a)=>{e.addEventListener("load",o),e.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${p}`)))})}))}function r(t){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=t,window.dispatchEvent(d),!d.defaultPrevented)throw t}return s.then(t=>{for(const d of t||[])d.status==="rejected"&&r(d.reason);return n().catch(r)})},Je=[{path:"/",name:"/",component:()=>w(()=>import("./index-BNuMk3Wi.js"),__vite__mapDeps([0,1,2,3,4,5]))},{path:"/categories-management",name:"/categories-management",component:()=>w(()=>import("./categories-management-D7d4FVEB.js"),__vite__mapDeps([6,7,2,8,1,3,9]))},{path:"/change-theme",name:"/change-theme",component:()=>w(()=>import("./change-theme-BrL0hv-5.js"),__vite__mapDeps([10,2,11]))},{path:"/design-information",name:"/design-information",component:()=>w(()=>import("./design-information-CuL6TuIM.js"),__vite__mapDeps([12,13,2,14,7,8,15,1,3,16]))},{path:"/expense-management",name:"/expense-management",component:()=>w(()=>import("./expense-management-BE2nOs9t.js"),__vite__mapDeps([17,7,2,8,1,3,14,15,4,18]))}],We=l=>{const n={};Object.entries(Object.assign({"/src/layouts/admin.vue":()=>w(()=>import("./admin-DbtWCf6F.js"),__vite__mapDeps([19,20,2,13,21,22,23])),"/src/layouts/default.vue":()=>w(()=>import("./default-BzAIhpTT.js"),__vite__mapDeps([24,20,2,13,21,22,25]))})).forEach(([s,r])=>{let t=s.replace("/src/layouts/","").replace(".vue","");n[t]=r});function h(s,r=!0){return s.map(t=>{var d,p,m,y,e,o;if(((d=t.children)==null?void 0:d.length)>0&&(t.children=h(t.children,!1)),r){if(!t.component&&((p=t.children)==null?void 0:p.find(g=>{var S;return(g.path===""||g.path==="/")&&((S=g.meta)==null?void 0:S.isLayout)})))return t;if(((m=t.meta)==null?void 0:m.layout)!==!1)return{path:t.path,component:n[((y=t.meta)==null?void 0:y.layout)||"default"],children:t.path==="/"?[t]:[{...t,path:""}],meta:{isLayout:!0}}}return(e=t.meta)!=null&&e.layout?{path:t.path,component:n[(o=t.meta)==null?void 0:o.layout],children:[{...t,path:""}],meta:{isLayout:!0}}:t})}return h(l)};function Ge(l){const n=ue({history:de(),routes:[...We([...Je,{path:"/login",name:"login",component:()=>w(()=>import("./LoginView-0xHu65_M.js"),__vite__mapDeps([26,2,21,27])),meta:{requiresAuth:!1}},{path:"/",name:"home",component:()=>w(()=>import("./HomeView-CecrKLKn.js"),__vite__mapDeps([28,2,29])),meta:{requiresAuth:!0}}])]});return n.beforeEach(async(u,h,s)=>{const r=localStorage.getItem("access_token"),t=L();if(console.log("Auth check:",{path:u.path,requiresAuth:u.meta.requiresAuth,isAuthenticated:!!r}),u.path==="/"&&!r){console.log("First-time page load - redirecting to login"),s("/login");return}if(u.meta.requiresAuth===!0){if(!r){console.log("Redirecting to login - requires auth but not authenticated"),s("/login");return}try{await t.fetchUserData(r),console.log("Token is valid - allowing access"),s()}catch(d){console.log("Token validation failed:",d),localStorage.removeItem("access_token"),s("/login");return}}else if(u.path==="/login"&&r)try{await t.fetchUserData(r),console.log("Token is valid - redirecting to home"),s("/")}catch(d){console.log("Token validation failed:",d),localStorage.removeItem("access_token"),s()}else console.log("Allowing access - page does not require auth"),s()}),n}const C=he(Ue);C.config.errorHandler=(l,n,u)=>{console.error("Vue Error:",l,u),l.message.includes("Failed to fetch dynamically imported module")};C.use(pe());C.use(Ge());C.use(me);C.mount("#app");export{ge as _,L as a,R as u};
