import{_ as $e}from"./ChangeModal-CwCIfM9c.js";import{_ as Ae}from"./DataTable-RgBcQQQR.js";import{_ as Pe}from"./SearchBar-BTGPTjxY.js";import{Q as Re,r as d,c as se,S as Y,B as c,ac as qe,o as Oe,T as Te,b as m,k as E,i as s,e as T,f as o,m as Z,g as l,h as n,N as A,a1 as H,p as u,z as j,R as je,a2 as y,F as z,l as ne,t as P,ad as oe,ae as Fe,$ as re,a0 as ie,I as de,af as Me,ag as Ke,Y as Je,Z as Be,X as Qe,a3 as Ye,a4 as Ge}from"./vendor-B24ldFEr.js";import{f as J}from"./formatter-DDo20qiT.js";import{_ as We,u as _}from"./index-BUXYj-sS.js";const Xe={class:"container"},Ze={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center",gap:"1rem"}},He={style:{display:"flex",gap:"1rem","align-items":"center","justify-content":"flex-end",width:"100%"}},Le={class:"search-bar"},ea={style:{"margin-bottom":"12px"}},aa={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"0.5rem"}},ta={class:"left-section-content"},la={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center","align-items":"center"}},sa={style:{width:"100%"}},na={style:{width:"100%",display:"flex",gap:"1rem","justify-content":"center","align-items":"center"}},oa={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center","align-items":"center"}},ra={style:{width:"100%"}},ia={style:{width:"100%",display:"flex",gap:"1rem","justify-content":"center","align-items":"center"}},da={style:{width:"100%","padding-top":"1rem"}},ua={class:"expense-info"},pa={class:"expense-info-grid"},va={style:{display:"flex","justify-content":"flex-end","padding-bottom":"1rem",gap:"1rem"}},ca={class:"items-list-container"},ma={class:"grid-item"},ga={key:1,class:"item-with-status"},ya={class:"grid-item",style:{"padding-left":"1rem"}},fa={class:"grid-item"},ha={class:"grid-item",style:{"font-weight":"bold",color:"#1890ff"}},ba={class:"grid-item"},wa={key:0,style:{display:"flex",gap:"8px"}},_a={style:{display:"flex","justify-content":"flex-end","margin-top":"1rem",gap:"1rem"}},Na={style:{width:"100%"}},xa={key:0,style:{display:"flex","flex-direction":"column",gap:"1rem"}},ka={class:"expense-info"},Ca={class:"expense-info-grid"},Ea={style:{display:"flex","justify-content":"flex-end","padding-bottom":"1rem",gap:"1rem"}},Ia={class:"items-list-container"},Da={class:"grid-item"},Ua={class:"grid-item",style:{"padding-left":"1rem"}},Sa={class:"grid-item"},za={class:"grid-item",style:{"font-weight":"bold",color:"#1890ff"}},Va={class:"grid-item"},$a={style:{display:"flex","justify-content":"flex-end","margin-top":"1rem",gap:"1rem"}},Aa={__name:"expense-management",setup(Pa){const G=Re();d(null);const V=d(null),R=d(null),q=d(!1),ue=d(!1),pe=d([]),F=d(!1),B=d(!1),O=d(!1);d(!1),d(!1);const I=d([]),$=d(null);d(null);const U=d([]),M=d(!1),W=d(null),v=d(null),f=d({name:"",vendorName:"",date:"",items:[]});d({name:"",quantity:1,price:0});const X=d(window.innerWidth),ve=t=>{pe.value=t},k=d({category:null,date:"",name:"",vendorName:""}),b=d({category:null,date:"",name:"",vendorName:""}),L=()=>{F.value=!0},ce=(t,e)=>{I.value=Array.isArray(t)?t:[t],$.value=e,f.value={name:"",vendorName:"",date:"",items:[]},_().get(`/expenses/${e}`).then(r=>{const i=r.data;if(i.date){const N=new Date(i.date);i.date=N.toISOString().split("T")[0]}f.value=i,f.value.originalData=JSON.parse(JSON.stringify(f.value))}),O.value=!0},me=se(()=>[{title:"ID",key:"id"},{title:"Category",key:"category"},{title:"Date",key:"date",render(t){const e=new Date(t.date),r=String(e.getDate()).padStart(2,"0"),N=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],w=e.getFullYear();return Y("span",null,`${r} ${N} ${w}`)},className:"formatNumber",width:"10%"},{title:"Name",key:"name"},{title:"Vendor Name",key:"vendorName"},{title:"Total Amount",key:"totalAmount",render(t){return Y("span",null,J(t.totalAmount,"Rp",0))},className:"formatNumber"},{title:"Photo",key:"photo"},{title:"Items",key:"items",render(t){return Y("div",[Y(c,{class:"paragraph-11-regular",style:{color:"white",backgroundColor:"var(--primary-20)",cursor:"pointer"},size:"small",round:!0,onClick:()=>ce(t.items,t.id)},"Detail")])},width:"7%"}]),ee=async(t,e,r)=>{var i,N,w,h,C,S;try{typeof r=="function"&&r(!0);const x={page:t,limit:e},g=await _().get("/expenses",x);return{data:(N=(i=g==null?void 0:g.data)==null?void 0:i.data)==null?void 0:N.map(a=>{var D,p;return{id:a==null?void 0:a._id,category:(D=a==null?void 0:a.category)==null?void 0:D.name,categoryId:(p=a==null?void 0:a.category)==null?void 0:p._id,date:a==null?void 0:a.date,name:a==null?void 0:a.name,vendorName:a==null?void 0:a.vendorName,totalAmount:a==null?void 0:a.totalAmount,photo:a==null?void 0:a.photo,items:a==null?void 0:a.items}}),meta:{page:(w=g==null?void 0:g.data)==null?void 0:w.page,pageSize:(h=g==null?void 0:g.data)==null?void 0:h.pageSize,totalPages:(C=g==null?void 0:g.data)==null?void 0:C.totalPages,totalResults:(S=g==null?void 0:g.data)==null?void 0:S.totalResults}}}catch(x){return typeof r=="function"&&r(!1),console.error("Error fetching expenses:",x),{data:[],meta:{page:1,pageSize:e,totalPages:0,totalResults:0}}}finally{typeof r=="function"&&r(!1)}},ae=async(t,e,r)=>{try{const i=await _().get("/categories");return U.value=i.data.map(N=>({label:N.name,value:N._id})),{data:U.value,meta:{page:1,pageSize:U.value.length,totalPages:1,totalResults:U.value.length}}}catch(i){return console.error("Error fetching categories:",i),{data:[],meta:{page:1,pageSize:0,totalPages:0,totalResults:0}}}finally{}},ge=async()=>{var t;try{const e=await _().post("/expenses",{...k.value,date:k.value.date?new Date(k.value.date).toISOString():null});k.value={category:null,date:"",name:"",vendorName:""},F.value=!1,(t=V.value)==null||t.refresh()}catch(e){console.error("Error adding expense:",e)}},ye=async()=>{var t;try{await _().patch(`/expenses/${b.value._id}`,{category:b.value.category,date:b.value.date?new Date(b.value.date).toISOString():null,name:b.value.name,vendorName:b.value.vendorName}),B.value=!1,(t=V.value)==null||t.refresh()}catch(e){console.error("Error updating expense:",e)}},fe=qe.debounce(async t=>{if(!t.length){await ae();return}try{const e=await _().get(`/categories?search=${t}`);U.value=e.data.map(r=>({label:r.name,value:r._id}))}catch(e){console.error("Error searching categories:",e),U.value=[]}},500),he=t=>{t.originalData={...t},t.isEditing=!0},be=t=>{t.subtotal=Number(t.quantity||0)*Number(t.price||0),t.isEditing=!1,t.isNew||(t.isUpdated=!0)},we=t=>{t.originalData&&(Object.assign(t,t.originalData),delete t.originalData),t.isEditing=!1},_e=async t=>{var e;try{await _().del(`/expenses/${$.value}/items/${t}`),I.value=I.value.filter(r=>r._id!==t),(e=V.value)==null||e.refresh(),await _().get(`/expenses/${$.value}`)}catch(r){console.error("Error deleting item:",r)}},Ne=async t=>{var e;try{await _().del(`/expenses/${t}`),O.value=!1,(e=V.value)==null||e.refresh()}catch(r){console.error("Error deleting expenses:",r)}},te=()=>{var t;(t=R.value)==null||t.click()},xe=async t=>{var r;const e=t.target.files[0];if(e){if(!["image/jpeg","image/jpg","image/png"].includes(e.type)){G.error({title:"Error",content:"Please upload only JPG, JPEG, or PNG files",duration:3e3}),t.target.value="";return}const N=new FormData;N.append("file",e);try{q.value=!0;const w=await _().post("/ai/extract-expense",N,{headers:{"Content-Type":"multipart/form-data"}});W.value=w==null?void 0:w.data;const h=JSON.parse(JSON.stringify((r=w==null?void 0:w.data)==null?void 0:r.data));if(h.date){const C=new Date(h.date);h.date=C.toISOString().split("T")[0]}if(h.category){const C=U.value.find(S=>S.label===h.category);h.categoryId=C?C.value:null}h.items?h.items=h.items.map(C=>({name:C.name||"",quantity:Number(C.quantity)||1,price:Number(C.price)||0})):h.items=[],v.value=h,M.value=!0}catch(w){console.error("Error uploading file:",w)}finally{q.value=!1,t.target.value=""}}},ke=()=>{M.value=!1,R.value&&(R.value.value="")},Ce=async t=>{var e;try{q.value=!0;const r={type:"ADD_EXPENSE",args:{name:v.value.name,date:v.value.date,vendorName:v.value.vendorName,category:v.value.categoryId,items:v.value.items.map(i=>({name:i.name,quantity:Number(i.quantity),price:Number(i.price)}))},oldData:null,newData:null};console.log(r,"<<<<<<<"),await _().patch(`/tasks/${t}/edit`,{data:r}),await _().post(`/tasks/${t}/run`,{data:r}),M.value=!1,(e=V.value)==null||e.refresh(),R.value&&(R.value.value="")}catch(r){console.error("Error processing expense:",r)}finally{q.value=!1}},Ee=()=>{v.value.items||(v.value.items=[]),v.value.items.unshift({name:"",quantity:1,price:0})},Ie=t=>{v.value.items.splice(t,1)},Q=t=>{[46,8,9,27,13,110,190].indexOf(t.keyCode)!==-1||t.keyCode===65&&t.ctrlKey===!0||t.keyCode===67&&t.ctrlKey===!0||t.keyCode===86&&t.ctrlKey===!0||t.keyCode===88&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()},De=async()=>{var t;try{await _().patch(`/expenses/${$.value}`,{name:f.value.name,vendorName:f.value.vendorName,date:f.value.date?new Date(f.value.date).toISOString():null});const e=I.value.filter(i=>i.isNew);for(const i of e)await _().post(`/expenses/${$.value}/items`,{name:i.name,quantity:i.quantity,price:i.price});const r=I.value.filter(i=>i.isUpdated&&!i.isNew);for(const i of r)await _().patch(`/expenses/${$.value}/items/${i._id}`,{name:i.name,quantity:i.quantity,price:i.price});G.success({title:"Success",content:"Expense updated successfully",duration:3e3}),(t=V.value)==null||t.refresh(),O.value=!1}catch(e){console.error("Error updating expense:",e),G.error({title:"Error",content:"Failed to update expense",duration:3e3})}},le=()=>{X.value=window.innerWidth},Ue=()=>{const t={name:"",quantity:1,price:0,subtotal:0,isEditing:!0,isNew:!0,isUpdated:!1};I.value.unshift(t)},Se=t=>{I.value.splice(t,1)},ze=se(()=>I.value.some(t=>t.isNew||t.isUpdated)),Ve=()=>{for(const t of I.value)t.isUpdated&&t.originalData&&Object.assign(t,t.originalData);if(I.value=I.value.filter(t=>!t.isNew),f.value.originalData){const{originalData:t,...e}=f.value;f.value={...t}}O.value=!1};return Oe(async()=>{q.value=!1,await ee(),await ae(),window.addEventListener("resize",le)}),Te(()=>{window.removeEventListener("resize",le)}),(t,e)=>{const r=Me,i=Pe,N=Ke,w=Ae,h=Je,C=Be,S=Qe,x=Ye,g=Ge,K=$e;return m(),E(z,null,[s("div",Xe,[q.value?(m(),T(r,{key:0,class:"loading-overlay"},{description:o(()=>e[23]||(e[23]=[s("div",{class:"loading-text"},"Processing your receipt...",-1)])),_:1})):Z("",!0),l(C,{"x-gap":"20","y-gap":"20",cols:"1","item-responsive":""},{default:o(()=>[l(h,{class:"left-section"},{default:o(()=>[s("div",Ze,[e[26]||(e[26]=s("div",{class:"header-semibold",style:{width:"100%"}}," Expense Managements ",-1)),s("div",He,[s("div",Le,[l(i,{queryFn:t.fetchSearchCompany,isNavigation:!1,title:"Search Expenses"},null,8,["queryFn"])]),l(n(c),{round:"",style:{"background-color":"var(--primary-20)",color:"white"},size:"medium",onClick:L,class:"paragraph-14-semibold"},{default:o(()=>[l(n(A),{size:"20",style:{"margin-right":"0.2rem"}},{default:o(()=>[l(n(H))]),_:1}),e[24]||(e[24]=u(" Add "))]),_:1}),l(n(c),{round:"",style:{"background-color":"var(--primary-20)",color:"white"},size:"medium",onClick:L,class:"paragraph-14-semibold"},{default:o(()=>[l(n(j),{src:"/export-ic.svg",width:"14",height:"14","preview-disabled":"",style:{"margin-right":"0.2rem"}}),e[25]||(e[25]=u(" Export "))]),_:1})])]),s("div",{class:"file-upload-section",onClick:te},[s("div",ea,[l(n(j),{src:"/picture-ic.svg",width:"48",height:"48","preview-disabled":""})]),s("div",aa,[l(N,{class:"paragraph-16-semibold"},{default:o(()=>e[27]||(e[27]=[u(" Choose image into here ")])),_:1}),s("input",{type:"file",ref_key:"fileInput",ref:R,style:{display:"none"},accept:".jpg,.jpeg,.png",onChange:xe},null,544),l(n(c),{class:"paragraph-14-semibold",size:"small",round:"",style:{"background-color":"var(--primary-20)",color:"white"},onClick:je(te,["stop"])},{default:o(()=>e[28]||(e[28]=[u(" Choose File ")])),_:1})])]),s("div",ta,[l(w,{class:"table",queryFn:ee,columns:me.value,loading:ue.value,useCheckbox:!1,"onUpdate:selectedRows":ve,ref_key:"dataTableRef",ref:V,"row-class-name":t.rowClassName},null,8,["columns","loading","row-class-name"])])]),_:1})]),_:1})]),l(K,{isVisible:F.value,modalTitle:"",modalType:"customize",textOnly:!1,formInputs:[],"onUpdate:isVisible":e[5]||(e[5]=a=>F.value=a)},{default:o(()=>[s("div",la,[s("div",sa,[e[31]||(e[31]=s("div",{style:{"padding-bottom":"2rem"},class:"paragraph-16-semibold"},"Add Expense",-1)),l(g,{ref:"formRef",model:k.value,rules:t.rules,size:t.size},{default:o(()=>[l(x,{label:"Category",path:"category"},{default:o(()=>[l(S,{value:k.value.category,"onUpdate:value":e[0]||(e[0]=a=>k.value.category=a),options:U.value,filterable:"",placeholder:"Select Category",clearable:"",onSearch:n(fe)},null,8,["value","options","onSearch"])]),_:1}),l(x,{label:"Date",path:"date"},{default:o(()=>[l(n(y),{type:"date",value:k.value.date,"onUpdate:value":e[1]||(e[1]=a=>k.value.date=a),placeholder:"",class:"paragraph-14-regular input-info"},null,8,["value"])]),_:1}),l(x,{label:"Name",path:"name"},{default:o(()=>[l(n(y),{value:k.value.name,"onUpdate:value":e[2]||(e[2]=a=>k.value.name=a),placeholder:"Input Name",class:"paragraph-14-regular input-info"},null,8,["value"])]),_:1}),l(x,{label:"Vendor Name",path:"vendorName"},{default:o(()=>[l(n(y),{value:k.value.vendorName,"onUpdate:value":e[3]||(e[3]=a=>k.value.vendorName=a),placeholder:"Input Vendor Name",class:"paragraph-14-regular input-info"},null,8,["value"])]),_:1}),l(x,null,{default:o(()=>[s("div",na,[l(n(c),{style:{padding:"0.5rem 3rem","background-color":"var(--neutral-30)",color:"white"},size:"large",round:"",onClick:e[4]||(e[4]=a=>F.value=!1)},{default:o(()=>e[29]||(e[29]=[u(" Cancel ")])),_:1}),l(n(c),{size:"large",round:"",style:{"background-color":"var(--primary-20)",color:"white",padding:"0.5rem 3rem"},onClick:ge},{default:o(()=>e[30]||(e[30]=[u(" Add ")])),_:1})])]),_:1})]),_:1},8,["model","rules","size"])])])]),_:1},8,["isVisible"]),l(K,{isVisible:B.value,modalTitle:"",modalType:"customize",textOnly:!1,formInputs:[],"onUpdate:isVisible":e[11]||(e[11]=a=>B.value=a)},{default:o(()=>[s("div",oa,[s("div",ra,[l(g,{ref:"editFormRef",model:b.value,rules:t.rules,size:t.size},{default:o(()=>[e[34]||(e[34]=s("div",{style:{"padding-bottom":"2rem"},class:"paragraph-16-semibold"},"Edit Expense",-1)),l(x,{label:"Category",path:"category"},{default:o(()=>[l(S,{value:b.value.category,"onUpdate:value":e[6]||(e[6]=a=>b.value.category=a),options:U.value,filterable:"",placeholder:"Select Category",clearable:""},null,8,["value","options"])]),_:1}),l(x,{label:"Date",path:"date"},{default:o(()=>[l(n(y),{type:"date",value:b.value.date,"onUpdate:value":e[7]||(e[7]=a=>b.value.date=a),placeholder:""},null,8,["value"])]),_:1}),l(x,{label:"Name",path:"name"},{default:o(()=>[l(n(y),{value:b.value.name,"onUpdate:value":e[8]||(e[8]=a=>b.value.name=a),placeholder:"Input Name"},null,8,["value"])]),_:1}),l(x,{label:"Vendor Name",path:"vendorName"},{default:o(()=>[l(n(y),{value:b.value.vendorName,"onUpdate:value":e[9]||(e[9]=a=>b.value.vendorName=a),placeholder:"Input Vendor Name"},null,8,["value"])]),_:1}),l(x,null,{default:o(()=>[s("div",ia,[l(n(c),{style:{padding:"0.5rem 3rem","background-color":"var(--neutral-30)",color:"white"},size:"large",round:"",onClick:e[10]||(e[10]=a=>B.value=!1)},{default:o(()=>e[32]||(e[32]=[u(" Cancel ")])),_:1}),l(n(c),{size:"large",round:"",style:{"background-color":"var(--primary-20)",color:"white",padding:"0.5rem 3rem"},onClick:ye},{default:o(()=>e[33]||(e[33]=[u(" Update ")])),_:1})])]),_:1})]),_:1},8,["model","rules","size"])])])]),_:1},8,["isVisible"]),l(K,{isVisible:O.value,modalTitle:"Items Detail",modalType:"customize",textOnly:!1,formInputs:[],"onUpdate:isVisible":e[16]||(e[16]=a=>a?O.value=!0:Ve()),style:de({width:X.value>1420?"60vw":"95vw"})},{default:o(()=>[s("div",da,[e[44]||(e[44]=s("div",{style:{display:"flex","align-items":"center",width:"100%"}},[s("div",{class:"paragraph-16-semibold"},"Detail Expense Management")],-1)),s("div",ua,[s("div",pa,[s("div",null,[e[35]||(e[35]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Name",-1)),l(n(y),{value:f.value.name,"onUpdate:value":e[12]||(e[12]=a=>f.value.name=a),placeholder:"Input Name",class:"paragraph-14-regular input-info"},null,8,["value"])]),s("div",null,[e[36]||(e[36]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Vendor Name",-1)),l(n(y),{value:f.value.vendorName,"onUpdate:value":e[13]||(e[13]=a=>f.value.vendorName=a),placeholder:"Input Vendor Name",class:"paragraph-14-regular input-info"},null,8,["value"])]),s("div",null,[e[37]||(e[37]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Date",-1)),l(n(y),{type:"date",value:f.value.date,"onUpdate:value":e[14]||(e[14]=a=>f.value.date=a),placeholder:"",class:"paragraph-14-regular input-info"},null,8,["value"])])])]),s("div",va,[l(n(c),{round:"",size:"small",style:{"background-color":"var(--primary-20)",color:"white"},onClick:Ue},{default:o(()=>[l(n(A),null,{default:o(()=>[l(n(H))]),_:1}),e[38]||(e[38]=u(" Add Item "))]),_:1})]),s("div",ca,[e[41]||(e[41]=s("div",{class:"items-header"},[s("div",{class:"grid-item"},"Name"),s("div",{class:"grid-item",style:{"padding-left":"1rem"}},"Qty"),s("div",{class:"grid-item"},"Price"),s("div",{class:"grid-item"},"Subtotal"),s("div",{class:"grid-item"},"Action")],-1)),(m(!0),E(z,null,ne(I.value,(a,D)=>(m(),E("div",{key:D,class:"items-row"},[s("div",ma,[a.isEditing?(m(),T(n(y),{key:0,value:a.name,"onUpdate:value":p=>a.name=p,placeholder:"Item Name",class:"paragraph-14-regular input-info"},null,8,["value","onUpdate:value"])):(m(),E("div",ga,[u(P(a.name||"Unnamed Item")+" ",1),a.isNew?(m(),T(n(oe),{key:0,dot:"",type:"success"})):a.isUpdated?(m(),T(n(oe),{key:1,dot:"",type:"info"})):Z("",!0)]))]),s("div",ya,[a.isEditing?(m(),T(n(y),{key:0,value:a.quantity,"onUpdate:value":p=>a.quantity=p,placeholder:"Quantity",onKeydown:Q,class:"paragraph-14-regular input-info"},null,8,["value","onUpdate:value"])):(m(),E(z,{key:1},[u(P(a.quantity||"0"),1)],64))]),s("div",fa,[a.isEditing?(m(),T(n(y),{key:0,value:a.price,"onUpdate:value":p=>a.price=p,placeholder:"Price",onKeydown:Q,class:"paragraph-14-regular input-info"},{prefix:o(()=>e[39]||(e[39]=[u("Rp")])),_:2},1032,["value","onUpdate:value"])):(m(),E(z,{key:1},[u(P(n(J)(Number(a.price||0),"Rp",0)),1)],64))]),s("div",ha,[a.isEditing?(m(),E(z,{key:0},[u(P(n(J)(Number(a.quantity||0)*Number(a.price||0),"Rp",0)),1)],64)):(m(),E(z,{key:1},[u(P(n(J)(Number(a.subtotal||0),"Rp",0)),1)],64))]),s("div",ba,[a.isEditing?(m(),E("div",wa,[l(n(c),{onClick:p=>a.isNew?Se(D):we(a),size:"small",text:""},{default:o(()=>[l(n(A),{size:"18",color:"var(--neutral-30)"},{default:o(()=>[l(n(Fe))]),_:1})]),_:2},1032,["onClick"]),l(n(c),{onClick:p=>be(a),size:"small",text:""},{default:o(()=>[l(n(A),{size:"18",color:"var(--primary-20)"},{default:o(()=>[l(n(j),{src:"/save-ic.svg",width:"16",height:"16","preview-disabled":""})]),_:1})]),_:2},1032,["onClick"])])):(m(),E(z,{key:1},[l(n(c),{onClick:p=>he(a),size:"small",text:""},{default:o(()=>[l(n(j),{src:"/pen.svg",width:"16",height:"16","preview-disabled":""})]),_:2},1032,["onClick"]),l(n(re),{placement:"top","positive-text":"Yes","negative-text":"No",onPositiveClick:p=>_e(a._id)},{icon:o(()=>[l(n(A),{color:"red"},{default:o(()=>[l(n(ie))]),_:1})]),trigger:o(()=>[l(n(c),{size:"small",text:""},{default:o(()=>[l(n(j),{src:"/trash-ic.svg",width:"16",height:"16","preview-disabled":""})]),_:1})]),default:o(()=>[e[40]||(e[40]=u(" Are you sure you want to delete this item? "))]),_:2},1032,["onPositiveClick"])],64))])]))),128))]),s("div",_a,[l(n(c),{round:"",size:"small",style:{"background-color":"var(--primary-20)",color:"white"},onClick:De},{default:o(()=>[u(P(ze.value?"Submit":"Update"),1)]),_:1}),l(n(re),{placement:"left","positive-text":"Yes","negative-text":"No",onPositiveClick:e[15]||(e[15]=a=>Ne($.value))},{icon:o(()=>[l(n(A),{color:"red"},{default:o(()=>[l(n(ie))]),_:1})]),trigger:o(()=>[l(n(c),{size:"small",round:"",style:{"background-color":"red",color:"white"}},{default:o(()=>e[42]||(e[42]=[u(" Delete ")])),_:1})]),default:o(()=>[e[43]||(e[43]=u(" Are you sure you want to delete this expense? "))]),_:1})])])]),_:1},8,["isVisible","style"]),l(K,{isVisible:M.value,modalTitle:"Extracted Expense Data",modalType:"customize",textOnly:!1,"mask-closable":!1,formInputs:[],"onUpdate:isVisible":e[22]||(e[22]=a=>M.value=a),style:de({width:X.value>1420?"60vw":"95vw"})},{default:o(()=>[s("div",Na,[e[54]||(e[54]=s("div",{style:{display:"flex","align-items":"center",width:"100%"}},[s("div",{class:"paragraph-16-semibold"},"Extracted Expense Data")],-1)),W.value?(m(),E("div",xa,[s("div",ka,[s("div",Ca,[s("div",null,[e[45]||(e[45]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Name",-1)),l(n(y),{value:v.value.name,"onUpdate:value":e[17]||(e[17]=a=>v.value.name=a),placeholder:"Input Name",class:"paragraph-14-regular input-info"},null,8,["value"])]),s("div",null,[e[46]||(e[46]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Vendor",-1)),l(n(y),{value:v.value.vendorName,"onUpdate:value":e[18]||(e[18]=a=>v.value.vendorName=a),placeholder:"Input Vendor Name",class:"paragraph-14-regular input-info"},null,8,["value"])]),s("div",null,[e[47]||(e[47]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Date",-1)),l(n(y),{type:"date",value:v.value.date,"onUpdate:value":e[19]||(e[19]=a=>v.value.date=a),placeholder:"",class:"paragraph-14-regular input-info"},null,8,["value"])]),s("div",null,[e[48]||(e[48]=s("div",{class:"paragraph-14-semibold",style:{"padding-bottom":"0.5rem"}},"Category",-1)),l(S,{value:v.value.categoryId,"onUpdate:value":e[20]||(e[20]=a=>v.value.categoryId=a),options:U.value,filterable:"",placeholder:"Select Category",clearable:"",class:"paragraph-14-regular"},null,8,["value","options"])])])]),s("div",Ea,[l(n(c),{round:"",size:"small",style:{"background-color":"var(--primary-20)",color:"white"},onClick:Ee},{default:o(()=>[l(n(A),null,{default:o(()=>[l(n(H))]),_:1}),e[49]||(e[49]=u(" Add Item "))]),_:1})]),s("div",Ia,[e[51]||(e[51]=s("div",{class:"items-header"},[s("div",{class:"grid-item"},"Name"),s("div",{class:"grid-item",style:{"padding-left":"1rem"}},"Qty"),s("div",{class:"grid-item"},"Price"),s("div",{class:"grid-item"},"Subtotal"),s("div",{class:"grid-item"},"Action")],-1)),(m(!0),E(z,null,ne(v.value.items,(a,D)=>(m(),E("div",{key:D,class:"items-row"},[s("div",Da,[l(n(y),{value:a.name,"onUpdate:value":p=>a.name=p,placeholder:"Item Name",class:"paragraph-14-regular input-info"},null,8,["value","onUpdate:value"])]),s("div",Ua,[l(n(y),{value:a.quantity,"onUpdate:value":p=>a.quantity=p,placeholder:"Quantity",onKeydown:Q,class:"paragraph-14-regular input-info"},null,8,["value","onUpdate:value"])]),s("div",Sa,[l(n(y),{value:a.price,"onUpdate:value":p=>a.price=p,placeholder:"Price",onKeydown:Q,class:"paragraph-14-regular input-info"},{prefix:o(()=>e[50]||(e[50]=[u("Rp")])),_:2},1032,["value","onUpdate:value"])]),s("div",za,P(n(J)(Number(a.quantity||0)*Number(a.price||0),"Rp",0)),1),s("div",Va,[l(n(c),{onClick:p=>Ie(D),size:"small",text:""},{default:o(()=>[l(n(j),{src:"/trash-ic.svg",width:"16",height:"16","preview-disabled":""})]),_:2},1032,["onClick"])])]))),128))]),s("div",$a,[l(n(c),{round:"",size:"small",style:{"background-color":"var(--neutral-30)",color:"white"},onClick:ke},{default:o(()=>e[52]||(e[52]=[u(" Close ")])),_:1}),l(n(c),{round:"",size:"small",style:{"background-color":"var(--primary-20)",color:"white"},onClick:e[21]||(e[21]=a=>{var D,p;return Ce((p=(D=W.value)==null?void 0:D.task)==null?void 0:p._id)})},{default:o(()=>e[53]||(e[53]=[u(" Process ")])),_:1})])])):Z("",!0)])]),_:1},8,["isVisible","style"])],64)}}},Ma=We(Aa,[["__scopeId","data-v-76744a94"]]);export{Ma as default};
