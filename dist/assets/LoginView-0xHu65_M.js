import{u as b,Q as q,r as c,o as U,w as V,b as m,k as g,i as e,t as d,R as I,q as _,v as f,n as k,m as h,a as M}from"./vendor-B24ldFEr.js";import{_ as L}from"./logo-ttg-CCO2tMEl.js";import{_ as B}from"./index-BUXYj-sS.js";const C={class:"login-container"},A={class:"login-card"},D={class:"login-header"},N={style:{color:"#a7a7ad","font-size":"14","margin-bottom":"1.5rem","text-align":"center"}},P={class:"form-group"},R={key:0,class:"error-message"},z={class:"form-group"},F={key:0,class:"error-message"},H={key:0,class:"form-group"},Q={type:"submit",class:"btn-login"},T={class:"footer-text"},W={style:{color:"#a7a7ad"}},j={__name:"LoginView",setup(G){const w=b(),S=q(),t=c(""),r=c(""),v=c(""),s=c(!0),n=c(""),l=c(""),x=()=>{s.value=!s.value,t.value="",r.value="",v.value="",n.value="",l.value=""},E=async()=>{var i,o,a;try{if(n.value="",l.value="",!t.value||!r.value){t.value||(n.value="Email is required"),r.value||(l.value="Password is required");return}if(!s.value&&!v.value){alert("Username is required for registration");return}const p=s.value?"/auth/login":"/auth/register",y=s.value?{email:t.value,password:r.value}:{email:t.value,password:r.value,username:v.value};console.log("Sending payload:",y);const u=await M.post(void 0+p,y);console.log("Response:",u.data),u.data.access_token&&u.data.refresh_token?(localStorage.setItem("access_token",u.data.access_token),localStorage.setItem("refresh_token",u.data.refresh_token),S.success({title:"Success",content:"Login successful",duration:2500}),w.push("/")):console.log(u.data.message||"Something went wrong")}catch(p){console.error("Error:",p),((i=p.response)==null?void 0:i.status)===401?(n.value="Email or password is incorrect",l.value="Email or password is incorrect"):alert(((a=(o=p.response)==null?void 0:o.data)==null?void 0:a.message)||"An error occurred")}};return U(()=>{localStorage.getItem("access_token")&&w.push("/")}),V(s,i=>{console.log("isLoginMode changed:",i)}),(i,o)=>(m(),g("div",C,[e("div",A,[e("div",D,[o[3]||(o[3]=e("img",{src:L,class:"logo",width:"125",height:"100"},null,-1)),e("div",N,d(s.value?"Welcome Back! Sign in to your account":"Create your account"),1)]),e("form",{onSubmit:I(E,["prevent"])},[e("div",P,[_(e("input",{id:"email","onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"text",placeholder:"Email",required:"",class:k({"error-input":n.value})},null,2),[[f,t.value]]),n.value?(m(),g("div",R,d(n.value),1)):h("",!0)]),e("div",z,[_(e("input",{id:"password","onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a),type:"password",placeholder:"Password",required:"",class:k({"error-input":l.value})},null,2),[[f,r.value]]),l.value?(m(),g("div",F,d(l.value),1)):h("",!0)]),s.value?h("",!0):(m(),g("div",H,[_(e("input",{id:"username","onUpdate:modelValue":o[2]||(o[2]=a=>v.value=a),type:"text",placeholder:"Username",required:""},null,512),[[f,v.value]])])),o[4]||(o[4]=e("div",{style:{"text-align":"right"}},[e("a",{href:"#",class:"forget-text"},"Forgot Password?")],-1)),e("button",Q,d(s.value?"Sign In":"Sign Up"),1)],32),e("p",T,[e("span",W,d(s.value?"Don't Have an Account?":"Already have an account?"),1),e("a",{href:"#",onClick:x},d(s.value?"Sign Up":"Sign In"),1)])])]))}},X=B(j,[["__scopeId","data-v-2a65421f"]]);export{X as default};
