import{_ as j}from"./ChangeModal-CwCIfM9c.js";import{_ as M}from"./DataTable-RgBcQQQR.js";import{_ as B,u as k}from"./index-BUXYj-sS.js";import{r as u,c as F,S as c,B as p,z as C,$ as P,N,a0 as $,o as O,b as Y,k as q,i as n,g as t,f as o,h as m,a1 as K,p as y,F as Z,Y as G,Z as H,a2 as J,a3 as Q,a4 as W}from"./vendor-B24ldFEr.js";const X={class:"container"},L={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ee={style:{width:"100%",display:"flex","justify-content":"right","align-items":"center"}},te={class:"left-section-content"},ae={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center","align-items":"center"}},oe={style:{width:"100%"}},le={style:{width:"100%",display:"flex",gap:"1rem","justify-content":"center","align-items":"center"}},ne={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center","align-items":"center"}},se={style:{width:"100%"}},ie={style:{width:"100%",display:"flex",gap:"1rem","justify-content":"center","align-items":"center"}},re={__name:"categories-management",setup(de){const h=u(null),I=u(!1),D=u([]),g=u(!1),v=u(!1),s=u({name:"",description:""});u(localStorage.getItem("access_token"));const V=a=>{D.value=a},d=u({name:"",description:""}),T=()=>{g.value=!0},A=async()=>{var a;try{const e=await k().post("/categories",{name:d.value.name,description:d.value.description});d.value={name:"",description:""},g.value=!1,(a=h.value)==null||a.refresh()}catch(e){console.error("Error adding category:",e)}},E=async a=>{var e;try{if(!a){console.error("No items selected for deletion");return}await k().del(`/categories/${a}`),(e=h.value)==null||e.refresh()}catch(i){console.error("Error deleting categories:",i)}},R=a=>{s.value={_id:a._id,name:a.name,description:a.description},v.value=!0},U=async()=>{var a;try{if(!s.value._id){console.error("Category ID is missing");return}const e=await k().patch(`/categories/${s.value._id}`,{name:s.value.name,description:s.value.description});v.value=!1,(a=h.value)==null||a.refresh()}catch(e){console.error("Error updating category:",e)}},S=F(()=>[{title:"ID",key:"id"},{title:"Name",key:"name",sorter:!0},{title:"Description",key:"description",sorter:!0},{title:"Action",key:"action",width:"7%",render(a){return c("div",{style:{display:"flex",gap:"1rem"}},[c(p,{circle:!0,size:"small",text:!0,onClick:()=>R(a)},{default:()=>c(C,{width:"16",height:"16",src:"/pen.svg",previewDisabled:!0})}),c(P,{positiveText:"Yes",negativeText:"No",onPositiveClick:()=>E(a._id)},{icon:()=>c(N,{color:"red"},{default:()=>c($)}),trigger:()=>c(p,{circle:!0,size:"small",text:!0},{default:()=>c(C,{width:"16",height:"16",src:"/trash-ic.svg",previewDisabled:!0})}),default:()=>"Are you sure you want to delete this item?"})])}}]),w=async(a,e,i)=>{try{typeof i=="function"&&i(!0);const _=(await k().get("/categories")).data.map(r=>({_id:r._id,id:r._id,name:r.name,description:r.description}));return{data:_,meta:{page:1,pageSize:_.length,totalPages:1,totalResults:_.length}}}catch(b){return typeof i=="function"&&i(!1),console.error("Error fetching categories:",b),{data:[],meta:{page:1,pageSize:0,totalPages:0,totalResults:0}}}finally{typeof i=="function"&&i(!1)}};return O(()=>{w()}),(a,e)=>{const i=M,b=G,_=H,r=J,f=Q,x=W,z=j;return Y(),q(Z,null,[n("div",X,[t(_,{"x-gap":"20","y-gap":"20",cols:"1","item-responsive":""},{default:o(()=>[t(b,{class:"left-section"},{default:o(()=>[n("div",L,[e[9]||(e[9]=n("div",{class:"header-semibold",style:{color:"var(--text-color)",width:"100%"}},"Categories Management",-1)),n("div",ee,[t(m(p),{round:"",style:{"background-color":"var(--primary-20)",color:"white"},size:"medium",onClick:T},{default:o(()=>[t(m(N),{size:"20",style:{"margin-right":"0.2rem"}},{default:o(()=>[t(m(K))]),_:1}),e[8]||(e[8]=y(" Add "))]),_:1})])]),n("div",te,[t(i,{class:"table",queryFn:w,columns:S.value,loading:I.value,useCheckbox:!1,"onUpdate:selectedRows":V,pagination:!1,ref_key:"dataTableRef",ref:h},null,8,["columns","loading"])])]),_:1})]),_:1})]),t(z,{isVisible:g.value,modalTitle:"",modalType:"customize",textOnly:!1,formInputs:[],"onUpdate:isVisible":e[3]||(e[3]=l=>g.value=l)},{default:o(()=>[n("div",ae,[n("div",oe,[e[12]||(e[12]=n("div",{class:"header-semibold",style:{"padding-bottom":"2rem"}},"Add Category",-1)),t(x,{ref:"formRef",model:d.value,rules:a.rules,size:a.size},{default:o(()=>[t(f,{label:"Name",path:"name"},{default:o(()=>[t(r,{value:d.value.name,"onUpdate:value":e[0]||(e[0]=l=>d.value.name=l),placeholder:"Input Name"},null,8,["value"])]),_:1}),t(f,{label:"Description",path:"description"},{default:o(()=>[t(r,{value:d.value.description,"onUpdate:value":e[1]||(e[1]=l=>d.value.description=l),placeholder:"Input Description",type:"textarea"},null,8,["value"])]),_:1}),t(f,null,{default:o(()=>[n("div",le,[t(m(p),{style:{padding:"0.5rem 3rem","background-color":"var(--neutral-30)",color:"white"},size:"large",round:"",onClick:e[2]||(e[2]=l=>g.value=!1)},{default:o(()=>e[10]||(e[10]=[y(" Cancel ")])),_:1}),t(m(p),{size:"large",round:"",style:{"background-color":"var(--primary-20)",color:"white",padding:"0.5rem 3rem"},onClick:A},{default:o(()=>e[11]||(e[11]=[y(" Add ")])),_:1})])]),_:1})]),_:1},8,["model","rules","size"])])])]),_:1},8,["isVisible"]),t(z,{isVisible:v.value,modalTitle:"",modalType:"customize",textOnly:!1,formInputs:[],"onUpdate:isVisible":e[7]||(e[7]=l=>v.value=l)},{default:o(()=>[n("div",ne,[n("div",se,[e[15]||(e[15]=n("div",{style:{"padding-bottom":"2rem"},class:"paragraph-16-semibold"},"Edit Category",-1)),t(x,{ref:"editFormRef",model:s.value,rules:a.rules,size:a.size},{default:o(()=>[t(f,{label:"Name",path:"name"},{default:o(()=>[t(r,{value:s.value.name,"onUpdate:value":e[4]||(e[4]=l=>s.value.name=l),placeholder:"Input Name"},null,8,["value"])]),_:1}),t(f,{label:"Description",path:"description"},{default:o(()=>[t(r,{value:s.value.description,"onUpdate:value":e[5]||(e[5]=l=>s.value.description=l),placeholder:"Input Description",type:"textarea"},null,8,["value"])]),_:1}),t(f,null,{default:o(()=>[n("div",ie,[t(m(p),{style:{padding:"0.5rem 3rem","background-color":"var(--neutral-30)",color:"white"},size:"large",round:"",onClick:e[6]||(e[6]=l=>v.value=!1)},{default:o(()=>e[13]||(e[13]=[y(" Cancel ")])),_:1}),t(m(p),{size:"large",round:"",style:{"background-color":"var(--primary-20)",color:"white",padding:"0.5rem 3rem"},onClick:U},{default:o(()=>e[14]||(e[14]=[y(" Update ")])),_:1})])]),_:1})]),_:1},8,["model","rules","size"])])])]),_:1},8,["isVisible"])],64)}}},fe=B(re,[["__scopeId","data-v-01726ed0"]]);export{fe as default};
