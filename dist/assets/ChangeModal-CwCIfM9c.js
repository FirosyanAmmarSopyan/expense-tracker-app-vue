import{r as b,w as C,c as P,b as t,e as m,f as o,g as u,i as c,h as _,an as ee,m as r,k as i,ao as U,t as x,aj as ae,I as se,F as O,l as te,q as le,n as I,v as oe,ap as re,aq as ne,ar as ie,a as ce,N as de,B as ue,a2 as me,X as ye,Y as ge,Z as fe,as as pe,at as ve}from"./vendor-B24ldFEr.js";import{_ as he,a as be}from"./index-BUXYj-sS.js";const ke={style:{display:"flex","justify-content":"flex-end"}},_e={class:"modal-content"},Me={key:0},we={key:1},xe={key:2,style:{"text-align":"center",padding:"0 1rem"}},Te={key:0,class:"paragraph-16-semibold"},Ce={style:{display:"flex","justify-content":"center","margin-top":"1rem"}},$e={key:0,class:"text-large text-grey",style:{width:"80%"}},Ve={key:1,class:"text-large text-grey",style:{width:"80%"}},Se={key:2,class:"text-large text-grey",style:{width:"80%"}},ze={key:3,class:"text-large text-grey",style:{width:"80%"}},Ne={key:4,class:"text-large text-grey"},Be={key:5,class:"text-large text-grey"},Pe={key:3,style:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column",gap:"1rem"}},Ue=["innerHTML"],Oe={style:{"margin-bottom":"0.3rem"},class:"paragraph-14-semibold"},Ie=["onUpdate:modelValue","placeholder","onInput"],De={key:2,style:{color:"#ff3838","margin-left":"0.5rem","font-size":"12px"}},Ee={style:{display:"flex",gap:"1rem","justify-content":"center"}},je=["innerHTML"],Le=["innerHTML"],Ae={style:{display:"flex",gap:"1rem","justify-content":"center",width:"48%"}},He={__name:"ChangeModal",props:{isVisible:Boolean,modalTitle:String,modalType:String,formInputs:Array,customBehavior:Boolean,textOnly:Boolean,message:String,errorMessage:String},emits:["update:isVisible","confirmChange","errorOccurred"],setup(s,{emit:D}){const T=be(),g=s,v=D,M=b(g.isVisible),$=b(null),h=b(JSON.parse(JSON.stringify(g.formInputs)).map(e=>(e.type==="select"&&e.value,e)));C(()=>g.isVisible,e=>{M.value=e}),C(()=>g.formInputs,e=>{h.value=JSON.parse(JSON.stringify(e)).map(a=>{if(a.type==="date"&&a.value)try{const n=new Date(a.value);isNaN(n.getTime())||($.value=n.getTime())}catch{$.value=null}return a})},{deep:!0});const y=b(!1),f=b(!1),w=()=>{h.value.forEach(e=>e.value),M.value=!1,v("update:isVisible",!1),v("update:errorMessage",""),h.value.forEach(e=>e.errorMessage="")},E=e=>{M.value=e,v("update:isVisible",e)};C(()=>g.errorMessage,e=>{});const j=async()=>{if(!f.value){f.value=!0;try{if(await H(),V.value){y.value=!1,v("update:errorMessage",S(V.value));return}if(!h.value.every(a=>a.value&&!a.errorMessage)){y.value=!1,v("update:errorMessage",S("Some inputs are invalid"));return}v("confirmChange",h.value),y.value=!0,setTimeout(()=>{y.value=!1},1500)}finally{f.value=!1}}},L=async()=>{if(!f.value){f.value=!0;try{g.customBehavior&&v("customBehaviorTriggered",!0),y.value=!0,setTimeout(()=>{y.value=!1,w()},1500)}finally{f.value=!1}}},A=P(()=>{switch(g.modalType){case"email":return"Check your email for instructions on completing the change!";case"password":return"Password change confirmed!";case"companyUrl":return`URL change confirmed!
Please allow 24 hours for changes to reflect in your  instance.`;case"name":return"Name change confirmed!";case"phone":return"Phone change confirmed!";case"confirmationModalPw":return"Email sent. Please check your inbox";default:return"Change confirmed!"}}),H=async()=>{for(const e of h.value)switch(e.modalType){case"name":e.value?e.value.length>50?e.errorMessage=`${e.label} too long`:/[^a-zA-Z ']/.test(e.value)?e.errorMessage=`${e.label} cannot use special characters except ' and numbers`:e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;case"companyName":e.value?e.value.length>50?e.errorMessage=`${e.label} too long`:/[^a-zA-Z0-9 '.,&-]/.test(e.value)?e.errorMessage=`${e.label} can only contain letters, numbers, and symbols ( ' , . & - )`:e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;case"phone":e.value?e.value.length<9||e.value.length>12?e.errorMessage=`${e.label} at least 9 numbers and max 12 numbers`:e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;case"password":e.value?e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;case"email":e.value?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)?e.errorMessage="":e.errorMessage=`${e.label} invalid email address`:e.errorMessage=`${e.label} cannot be empty`;break;case"companyUrl":e.value?await J(e.value)?/^https?:\/\//.test(e.value)?e.errorMessage="":e.errorMessage=`${e.label} must start with https:// or http://`:e.errorMessage=`${e.label} is not a valid`:e.errorMessage=`${e.label} cannot be empty`;break;case"company":e.value?e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;case"date":e.value?e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;case"bigint":e.value?e.errorMessage="":e.errorMessage=`${e.label} cannot be empty`;break;default:e.errorMessage="";break}},F=(e,a)=>{if(a==="name")e.key>="0"&&e.key<="9"&&e.preventDefault();else if(a==="phone"){const n=e.target.value;(e.key==="+"&&n.length>0||!/^[0-9+]*$/.test(e.key)&&e.key!=="Backspace")&&e.preventDefault()}else a==="bigint"&&(!/^[0-9]*$/.test(e.key)&&e.key!=="Backspace"?e.preventDefault():setTimeout(()=>{const n=e.target,p=n.value.replace(/,/g,"");p&&(n.value=new Intl.NumberFormat("en-US").format(parseInt(p)))},0))},J=async e=>(await ce.post("undefined/companies/validate-url",{url:e})).data.isValid,V=b(g.errorMessage),S=e=>{const a=e.split(":");return a.length>1?a[1].trim():e},R=b([{label:"Select Ownership",value:null,disabled:!0},{label:"Private",value:"Private"},{label:"Public",value:"Public"}]),K=(e,a)=>{const n=e.target.value;n?a.value=n:a.value=null},z=P(()=>T.localSelectedValue),Z=(e,a)=>{a.value=e,T.localSelectedValue=e};return(e,a)=>{const n=de,p=ue,q=me,W=ye,k=ge,G=fe,X=pe,Y=ve;return t(),m(Y,{show:M.value,"onUpdate:show":E,class:"modal",style:{display:"flex","justify-content":"center"}},{default:o(()=>[u(X,{class:"modal-card",bordered:!1,"aria-modal":"true"},{default:o(()=>{var N,B;return[c("div",ke,[s.modalType!=="subs&billing"&&!y.value?(t(),m(p,{key:0,secondary:"",text:"",onClick:w},{icon:o(()=>[u(n,{component:_(ee),size:"30",color:"black"},null,8,["component"])]),_:1})):r("",!0)]),c("div",_e,[s.modalType==="customize"?(t(),i("div",Me,[U(e.$slots,"default",{},void 0,!0)])):r("",!0),s.modalType==="subs&billing"?(t(),i("div",we,[U(e.$slots,"default",{},void 0,!0)])):r("",!0),y.value?(t(),i("div",Pe,[u(n,{size:100,component:_(ae),color:"#3FAA6A"},null,8,["component"]),c("div",{innerHTML:A.value,style:{"text-align":"center","margin-bottom":"1rem"},class:"text-large"},null,8,Ue)])):(t(),i("div",xe,[s.textOnly?r("",!0):(t(),i("div",Te,x((()=>{switch(s.modalType){case"email":return"Email Change";case"companyName":return"Company Name Change";case"password":return"Password Change";case"companyUrl":return"Company URL Change";case"name":return"Name Change";case"phone":return"Phone Change";case"confirmationModal":return`${s.modalTitle}`;default:return""}})()),1)),c("div",Ce,[s.modalType==="companyUrl"?(t(),i("div",$e," Enter a Company URL with a valid format to ensure correct access ")):r("",!0),s.modalType==="phone"?(t(),i("div",Ve," Enter your active phone number to ensure the latest information ")):r("",!0),s.modalType==="name"?(t(),i("div",Se," Please enter your full name according to your official identity ")):r("",!0),s.modalType==="companyName"?(t(),i("div",ze," Please enter your Company Name according to your official identity ")):r("",!0),s.modalType==="email"||s.modalType==="password"||s.modalType==="confirmationModal"?(t(),i("div",Ne," We'll send an email to your new address with instructions on completing the change ")):r("",!0),s.modalType==="confirmationModalPw"?(t(),i("div",Be," We'll send reset password instruction to your email address ("+x((B=(N=_(T))==null?void 0:N.userData)==null?void 0:B.email)+") ",1)):r("",!0)])])),!y.value&&s.modalType!=="customize"&&s.modalType!=="subs&billing"?(t(),m(G,{key:4,cols:1,style:se([{gap:"1rem","margin-bottom":"1rem",padding:"0 2rem 1rem 2rem"},{"margin-top":s.modalType==="company"?"0":"2rem"}])},{default:o(()=>[(t(!0),i(O,null,te(h.value,(l,Q)=>(t(),m(k,{key:Q},{default:o(()=>[c("div",Oe,x(l.label),1),l.type==="date"?le((t(),i("input",{key:0,type:"date","onUpdate:modelValue":d=>l.value=d,placeholder:l.placeholder||"",class:I({"input-error":l.errorMessage}),style:{width:"100%","border-radius":"50px",padding:"12px",border:"1px solid #e0e0e6"},onInput:d=>K(d,l)},null,42,Ie)),[[oe,l.value]]):l.type!=="select"?(t(),m(q,{key:1,style:{"border-radius":"50px"},value:l.value,"onUpdate:value":d=>l.value=d,type:l.type,"show-password-on":"click",size:"large",placeholder:l.placeholder,class:I({"input-error":l.errorMessage}),onKeydown:d=>F(d,l.modalType)},re({_:2},[l.type==="password"?{name:"password-visible-icon",fn:o(()=>[u(n,{size:20},{default:o(()=>[u(_(ne))]),_:1})]),key:"0"}:void 0,l.type==="password"?{name:"password-invisible-icon",fn:o(()=>[u(n,{size:20},{default:o(()=>[u(_(ie))]),_:1})]),key:"1"}:void 0]),1032,["value","onUpdate:value","type","placeholder","class","onKeydown"])):r("",!0),l.errorMessage?(t(),i("span",De,x(l.errorMessage),1)):r("",!0),l.type==="select"?(t(),m(W,{key:3,style:{"border-radius":"50px !important"},size:"large",value:z.value,"onUpdate:value":[a[0]||(a[0]=d=>z.value=d),d=>Z(d,l)],options:R.value,placeholder:l.placeholder},null,8,["value","options","placeholder","onUpdate:value"])):r("",!0)]),_:2},1024))),128)),s.customBehavior?(t(),m(k,{key:0,style:{display:"flex","justify-content":"center",gap:"1rem"}},{default:o(()=>[c("div",Ee,[u(p,{secondary:"",style:{width:"100%","border-radius":"50px","background-color":"#9e9e9e",color:"white"},size:"medium",onClick:w},{default:o(()=>a[1]||(a[1]=[c("div",{class:"paragraph-16-semibold"},"Cancel",-1)])),_:1}),u(p,{secondary:"",style:{width:"100%","border-radius":"50px","background-color":"#1a9c4d",color:"white"},size:"medium",disabled:f.value,onClick:L},{default:o(()=>a[2]||(a[2]=[c("div",{class:"paragraph-16-semibold"},"Confirm",-1)])),_:1},8,["disabled"])])]),_:1})):r("",!0),e.confirmationModal?(t(),m(k,{key:1,style:{display:"flex","justify-content":"center",gap:"1rem","font-size":"1.1rem","text-align":"center"}},{default:o(()=>[c("span",{innerHTML:s.message},null,8,je)]),_:1})):r("",!0),s.textOnly?(t(),m(k,{key:2},{default:o(()=>[c("div",{class:"message-textonly",innerHTML:s.message},null,8,Le)]),_:1})):(t(),i(O,{key:3},[s.modalType!=="confirmationModal"&&s.modalType!=="customize"&&s.modalType!=="subs&billing"&&s.modalType!=="confirmationModalPw"?(t(),m(k,{key:0,style:{display:"flex","justify-content":"center",width:"100%","margin-top":"1rem"}},{default:o(()=>[c("div",Ae,[u(p,{secondary:"",style:{width:"100%","border-radius":"50px","background-color":"#9e9e9e",color:"white"},size:"medium",onClick:w},{default:o(()=>a[3]||(a[3]=[c("div",{class:"paragraph-16-semibold"},"Cancel",-1)])),_:1}),u(p,{secondary:"",style:{width:"100%","border-radius":"50px","background-color":"#1a9c4d",color:"white"},size:"medium",disabled:f.value,onClick:j},{default:o(()=>a[4]||(a[4]=[c("div",{class:"paragraph-16-semibold"},"Confirm",-1)])),_:1},8,["disabled"])])]),_:1})):r("",!0)],64))]),_:1},8,["style"])):r("",!0)])]}),_:3})]),_:3},8,["show"])}}},Re=he(He,[["__scopeId","data-v-59dafcad"]]);export{Re as _};
